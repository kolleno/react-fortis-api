/**
 * Fortis APILib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

import {
  CommunicationTypeEnum,
  CountryEnum,
  IdtypeEnum,
  LocationTypeEnum,
  OrderEnum,
  ProcessMethodEnum,
  ReportExportTypeEnum,
  ResponseTerminal,
  ResponseTerminalsCollection,
  StatusCodeEnum,
  TerminalManufacturerCodeEnum,
  TerminalsController,
  Type2Enum,
  Type3Enum,
  Type4Enum,
  Type77Enum,
  Type78Enum,
  UserTypeCodeEnum,
} from '../src';
import { testClient } from './testClient';
import {
  expectHeadersToMatch,
  expectMatchingWithOptions,
  makeApiCall,
} from './testHelper';

describe('TerminalsController', () => {
  let controller : TerminalsController;

  beforeAll(() => {
    controller = new TerminalsController(testClient);
  });

  it('should Test List all terminals related', async () => {
    const response = await makeApiCall(
      () => controller.listAllTerminalsRelated(
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined
      )
    );

    expect(response.statusCode).toBe(200);

    const expectedHeaders = { 'Content-Type': ['application/json', true] };

    expectHeadersToMatch(response.headers, expectedHeaders);

    const expected: ResponseTerminalsCollection = {
      type: Type78Enum.TerminalsCollection,
      list: [
        {
          locationId: '11e95f8ec39de8fbdb0a4f1a',
          defaultProductTransactionId: '11e95f8ec39de8fbdb0a4f1a',
          terminalApplicationId: '11e95f8ec39de8fbdb0a4f1a',
          terminalCvmId: '11e95f8ec39de8fbdb0a4f1a',
          terminalManufacturerCode: TerminalManufacturerCodeEnum.Enum1,
          title: 'My terminal',
          macAddress: '3D:F2:C9:A6:B3:4F',
          localIpAddress: '192.168.0.10',
          port: 10009,
          serialNumber: '1234567890',
          terminalNumber: '973456789012367',
          terminalTimeouts: {
            cardEntryTimeout: 47,
            deviceTermsPromptTimeout: 30,
            overallTimeout: 125,
            pinEntryTimeout: 40,
            signatureInputTimeout: 35,
            signatureSubmitTimeout: 38,
            statusDisplayTime: 12,
            tipCashbackTimeout: 25,
            transactionTimeout: 17,
          },
          tipPercents: {
            percent1: 0,
            percent2: 2,
            percent3: 99,
          },
          headerLine1: 'line 1 sample',
          headerLine2: 'line 2 sample',
          headerLine3: 'line 3 sample',
          headerLine4: 'line 4 sample',
          headerLine5: 'line 5 sample',
          trailerLine1: 'trailer 1 sample',
          trailerLine2: 'trailer 2 sample',
          trailerLine3: 'trailer 3 sample',
          trailerLine4: 'trailer 4 sample',
          trailerLine5: 'trailer 5 sample',
          defaultCheckin: '2021-12-01',
          defaultCheckout: '2021-12-01',
          defaultRoomRate: 56,
          defaultRoomNumber: '303',
          debit: false,
          emv: false,
          cashbackEnable: false,
          printEnable: false,
          sigCaptureEnable: false,
          isProvisioned: false,
          tipEnable: false,
          validatedDecryption: false,
          communicationType: CommunicationTypeEnum.Http,
          active: true,
          id: '11e95f8ec39de8fbdb0a4f1a',
          createdTs: 1422040992,
          modifiedTs: 1422040992,
          lastRegistrationTs: 1422040992,
          createdUserId: '11e95f8ec39de8fbdb0a4f1a',
          modifiedUserId: '11e95f8ec39de8fbdb0a4f1a',
          location: {
            id: '11e95f8ec39de8fbdb0a4f1a',
            createdTs: 1422040992,
            modifiedTs: 1422040992,
            accountNumber: '5454545454545454',
            address: {
              city: 'Novi',
              state: 'MI',
              postalCode: '48375',
              country: CountryEnum.US,
            },
            brandingDomainId: '11e95f8ec39de8fbdb0a4f1a',
            contactEmailTrxReceiptDefault: true,
            defaultAch: '11e608a7d515f1e093242bb2',
            defaultCc: '11e608a442a5f1e092242dda',
            emailReplyTo: 'email@domain.com',
            fax: '3339998822',
            locationApiId: 'location-111111',
            locationApiKey: 'AE34BBCAADF4AE34BBCAADF4',
            locationC1: 'custom 1',
            locationC2: 'custom 2',
            locationC3: 'custom data 3',
            name: 'Sample Company Headquarters',
            officePhone: '2481234567',
            officeExtPhone: '1021021209',
            tz: 'America/New_York',
            parentId: '11e95f8ec39de8fbdb0a4f1a',
            showContactNotes: true,
            showContactFiles: true,
            createdUserId: '11e95f8ec39de8fbdb0a4f1a',
            locationType: LocationTypeEnum.Merchant,
            ticketHashKey: 'A5F443CADF4AE34BBCAADF4',
          },
          createdUser: {
            accountNumber: '5454545454545454',
            brandingDomainUrl: '{branding_domain_url}',
            cellPhone: '3339998822',
            companyName: 'Fortis Payment Systems, LLC',
            contactId: '11e95f8ec39de8fbdb0a4f1a',
            dateOfBirth: '2021-12-01',
            domainId: '11e95f8ec39de8fbdb0a4f1a',
            email: 'email@domain.com',
            emailTrxReceipt: true,
            homePhone: '3339998822',
            firstName: 'John',
            lastName: 'Smith',
            locale: 'en-US',
            officePhone: '3339998822',
            officeExtPhone: '5',
            primaryLocationId: '11e95f8ec39de8fbdb0a4f1a',
            requiresNewPassword: 'requires_new_password2',
            termsConditionCode: '20220308',
            tz: 'America/New_York',
            uiPrefs: {
              entryPage: 'dashboard',
              pageSize: 2,
              reportExportType: ReportExportTypeEnum.Csv,
              processMethod: ProcessMethodEnum.VirtualTerminal,
              defaultTerminal: '11e95f8ec39de8fbdb0a4f1a',
            },
            username: '{user_name}',
            userApiKey: '234bas8dfn8238f923w2',
            userHashKey: 'user_hash_key6',
            userTypeCode: UserTypeCodeEnum.Enum100,
            password: 'password4',
            zip: '48375',
            locationId: '11e95f8ec39de8fbdb0a4f1a',
            statusCode: StatusCodeEnum.Enum1,
            apiOnly: false,
            isInvitation: false,
            address: {
              city: 'Novi',
              state: 'MI',
              postalCode: '48375',
              country: CountryEnum.US,
            },
            id: '11e95f8ec39de8fbdb0a4f1a',
            status: true,
            loginAttempts: 0,
            lastLoginTs: 1422040992,
            createdTs: 1422040992,
            modifiedTs: 1422040992,
            createdUserId: '11e95f8ec39de8fbdb0a4f1a',
            termsAcceptedTs: 1422040992,
            termsAgreeIp: '192.168.0.10',
            currentDateTime: '2019-03-11T10:38:26-0700',
            currentLogin: 1422040992,
            logApiResponseBodyTs: 1422040992,
          },
          terminalApplication: {
            standalone: true,
            emvCapable: true,
            nfcCapable: false,
            pinCapable: true,
            printCapable: false,
            msrCapable: true,
            sigCaptureCapable: false,
            mposTerminal: false,
            title: 'Ingenico Link2500',
            id: '11e95f8ec39de8fbdb0a4f1a',
            createdTs: 1422040992,
            modifiedTs: 1422040992,
            createdUserId: '11e95f8ec39de8fbdb0a4f1a',
          },
          changelogs: [
            {
              id: '11e95f8ec39de8fbdb0a4f1a',
              createdTs: 1422040992,
              action: 'CREATE',
              model: 'TransactionRequest',
              modelId: '11ec829598f0d4008be9aba4',
              userId: '11e95f8ec39de8fbdb0a4f1a',
              changelogDetails: [
                {
                  id: '11e95f8ec39de8fbdb0a4f1a',
                  changelogId: '11e95f8ec39de8fbdb0a4f1a',
                  field: 'next_run_ts',
                  oldValue: '1643616000',
                }
              ],
              user: {
                id: '11e95f8ec39de8fbdb0a4f1a',
                username: 'email@domain.com',
                firstName: 'Bob',
                lastName: 'Fairview',
              },
            }
          ],
          terminalRouters: [
            {
              macAddress: '3D:F2:C9:A6:B3:4F',
              locationId: '11e95f8ec39de8fbdb0a4f1a',
              id: '11e95f8ec39de8fbdb0a4f1a',
              createdTs: 1422040992,
              modifiedTs: 1422040992,
              createdUserId: '11e95f8ec39de8fbdb0a4f1a',
            }
          ],
          hasTerminalRouters: true,
          terminalCvm: {
            terminalManufacturerCode: 4,
            title: 'CVM One',
            id: '11e95f8ec39de8fbdb0a4f1a',
            createdTs: 1422040992,
            modifiedTs: 1422040992,
            createdUserId: '11e95f8ec39de8fbdb0a4f1a',
            modifiedUserId: '11e95f8ec39de8fbdb0a4f1a',
          },
          terminalManufacturer: {
            title: 'My terminal',
            idtype: IdtypeEnum.Mac,
            code: '4',
            createdTs: 1422040992,
            modifiedTs: 1422040992,
            createdUserId: '11e95f8ec39de8fbdb0a4f1a',
            modifiedUserId: '11e95f8ec39de8fbdb0a4f1a',
          },
        }
      ],
      links: {
        type: Type2Enum.Links,
        first: '/v1/endpoint?page[size]=10&page[number]=1',
        previous: '/v1/endpoint?page[size]=10&page[number]=5',
        next: '/v1/endpoint?page[size]=10&page[number]=7',
        last: '/v1/endpoint?page[size]=10&page[number]=42',
      },
      pagination: {
        type: Type3Enum.Pagination,
        totalCount: 423,
        pageCount: 42,
        pageNumber: 6,
        pageSize: 10,
      },
      sort: {
        type: Type4Enum.Sorting,
        fields: [
          {
            field: 'last_name',
            order: OrderEnum.Asc,
          }
        ],
      },
    };
    (expected.list ?? [])[0].terminalCvm.contactData = null;
    (expected.list ?? [])[0].terminalCvm.contactlessData = null;

    expect(response.result).not.toBeNull();
    expectMatchingWithOptions(
      expected,
      response.result,
      { allowExtra: true, isOrdered: false, checkValues: false }
    );
  });

  it('should Test View single terminals record', async () => {
    const terminalId = '11e95f8ec39de8fbdb0a4f1a';

    const response = await makeApiCall(
      () => controller.viewSingleTerminalsRecord(
        terminalId,
        undefined,
        undefined
      )
    );

    expect(response.statusCode).toBe(200);

    const expectedHeaders = { 'Content-Type': ['application/json', true] };

    expectHeadersToMatch(response.headers, expectedHeaders);

    const expected: ResponseTerminal = {
      type: Type77Enum.Terminal,
      data: {
        locationId: '11e95f8ec39de8fbdb0a4f1a',
        defaultProductTransactionId: '11e95f8ec39de8fbdb0a4f1a',
        terminalApplicationId: '11e95f8ec39de8fbdb0a4f1a',
        terminalCvmId: '11e95f8ec39de8fbdb0a4f1a',
        terminalManufacturerCode: TerminalManufacturerCodeEnum.Enum1,
        title: 'My terminal',
        macAddress: '3D:F2:C9:A6:B3:4F',
        localIpAddress: '192.168.0.10',
        port: 10009,
        serialNumber: '1234567890',
        terminalNumber: '973456789012367',
        terminalTimeouts: {
          cardEntryTimeout: 47,
          deviceTermsPromptTimeout: 30,
          overallTimeout: 125,
          pinEntryTimeout: 40,
          signatureInputTimeout: 35,
          signatureSubmitTimeout: 38,
          statusDisplayTime: 12,
          tipCashbackTimeout: 25,
          transactionTimeout: 17,
        },
        tipPercents: {
          percent1: 0,
          percent2: 2,
          percent3: 99,
        },
        headerLine1: 'line 1 sample',
        headerLine2: 'line 2 sample',
        headerLine3: 'line 3 sample',
        headerLine4: 'line 4 sample',
        headerLine5: 'line 5 sample',
        trailerLine1: 'trailer 1 sample',
        trailerLine2: 'trailer 2 sample',
        trailerLine3: 'trailer 3 sample',
        trailerLine4: 'trailer 4 sample',
        trailerLine5: 'trailer 5 sample',
        defaultCheckin: '2021-12-01',
        defaultCheckout: '2021-12-01',
        defaultRoomRate: 56,
        defaultRoomNumber: '303',
        debit: false,
        emv: false,
        cashbackEnable: false,
        printEnable: false,
        sigCaptureEnable: false,
        isProvisioned: false,
        tipEnable: false,
        validatedDecryption: false,
        communicationType: CommunicationTypeEnum.Http,
        active: true,
        id: '11e95f8ec39de8fbdb0a4f1a',
        createdTs: 1422040992,
        modifiedTs: 1422040992,
        lastRegistrationTs: 1422040992,
        createdUserId: '11e95f8ec39de8fbdb0a4f1a',
        modifiedUserId: '11e95f8ec39de8fbdb0a4f1a',
        location: {
          id: '11e95f8ec39de8fbdb0a4f1a',
          createdTs: 1422040992,
          modifiedTs: 1422040992,
          accountNumber: '5454545454545454',
          address: {
            city: 'Novi',
            state: 'MI',
            postalCode: '48375',
            country: CountryEnum.US,
          },
          brandingDomainId: '11e95f8ec39de8fbdb0a4f1a',
          contactEmailTrxReceiptDefault: true,
          defaultAch: '11e608a7d515f1e093242bb2',
          defaultCc: '11e608a442a5f1e092242dda',
          emailReplyTo: 'email@domain.com',
          fax: '3339998822',
          locationApiId: 'location-111111',
          locationApiKey: 'AE34BBCAADF4AE34BBCAADF4',
          locationC1: 'custom 1',
          locationC2: 'custom 2',
          locationC3: 'custom data 3',
          name: 'Sample Company Headquarters',
          officePhone: '2481234567',
          officeExtPhone: '1021021209',
          tz: 'America/New_York',
          parentId: '11e95f8ec39de8fbdb0a4f1a',
          showContactNotes: true,
          showContactFiles: true,
          createdUserId: '11e95f8ec39de8fbdb0a4f1a',
          locationType: LocationTypeEnum.Merchant,
          ticketHashKey: 'A5F443CADF4AE34BBCAADF4',
        },
        createdUser: {
          accountNumber: '5454545454545454',
          brandingDomainUrl: '{branding_domain_url}',
          cellPhone: '3339998822',
          companyName: 'Fortis Payment Systems, LLC',
          contactId: '11e95f8ec39de8fbdb0a4f1a',
          dateOfBirth: '2021-12-01',
          domainId: '11e95f8ec39de8fbdb0a4f1a',
          email: 'email@domain.com',
          emailTrxReceipt: true,
          homePhone: '3339998822',
          firstName: 'John',
          lastName: 'Smith',
          locale: 'en-US',
          officePhone: '3339998822',
          officeExtPhone: '5',
          primaryLocationId: '11e95f8ec39de8fbdb0a4f1a',
          requiresNewPassword: 'requires_new_password2',
          termsConditionCode: '20220308',
          tz: 'America/New_York',
          uiPrefs: {
            entryPage: 'dashboard',
            pageSize: 2,
            reportExportType: ReportExportTypeEnum.Csv,
            processMethod: ProcessMethodEnum.VirtualTerminal,
            defaultTerminal: '11e95f8ec39de8fbdb0a4f1a',
          },
          username: '{user_name}',
          userApiKey: '234bas8dfn8238f923w2',
          userHashKey: 'user_hash_key6',
          userTypeCode: UserTypeCodeEnum.Enum100,
          password: 'password4',
          zip: '48375',
          locationId: '11e95f8ec39de8fbdb0a4f1a',
          statusCode: StatusCodeEnum.Enum1,
          apiOnly: false,
          isInvitation: false,
          address: {
            city: 'Novi',
            state: 'MI',
            postalCode: '48375',
            country: CountryEnum.US,
          },
          id: '11e95f8ec39de8fbdb0a4f1a',
          status: true,
          loginAttempts: 0,
          lastLoginTs: 1422040992,
          createdTs: 1422040992,
          modifiedTs: 1422040992,
          createdUserId: '11e95f8ec39de8fbdb0a4f1a',
          termsAcceptedTs: 1422040992,
          termsAgreeIp: '192.168.0.10',
          currentDateTime: '2019-03-11T10:38:26-0700',
          currentLogin: 1422040992,
          logApiResponseBodyTs: 1422040992,
        },
        terminalApplication: {
          standalone: true,
          emvCapable: true,
          nfcCapable: false,
          pinCapable: true,
          printCapable: false,
          msrCapable: true,
          sigCaptureCapable: false,
          mposTerminal: false,
          title: 'Ingenico Link2500',
          id: '11e95f8ec39de8fbdb0a4f1a',
          createdTs: 1422040992,
          modifiedTs: 1422040992,
          createdUserId: '11e95f8ec39de8fbdb0a4f1a',
        },
        changelogs: [
          {
            id: '11e95f8ec39de8fbdb0a4f1a',
            createdTs: 1422040992,
            action: 'CREATE',
            model: 'TransactionRequest',
            modelId: '11ec829598f0d4008be9aba4',
            userId: '11e95f8ec39de8fbdb0a4f1a',
            changelogDetails: [
              {
                id: '11e95f8ec39de8fbdb0a4f1a',
                changelogId: '11e95f8ec39de8fbdb0a4f1a',
                field: 'next_run_ts',
                oldValue: '1643616000',
              }
            ],
            user: {
              id: '11e95f8ec39de8fbdb0a4f1a',
              username: 'email@domain.com',
              firstName: 'Bob',
              lastName: 'Fairview',
            },
          }
        ],
        terminalRouters: [
          {
            macAddress: '3D:F2:C9:A6:B3:4F',
            locationId: '11e95f8ec39de8fbdb0a4f1a',
            id: '11e95f8ec39de8fbdb0a4f1a',
            createdTs: 1422040992,
            modifiedTs: 1422040992,
            createdUserId: '11e95f8ec39de8fbdb0a4f1a',
          }
        ],
        hasTerminalRouters: true,
        terminalCvm: {
          terminalManufacturerCode: 4,
          title: 'CVM One',
          id: '11e95f8ec39de8fbdb0a4f1a',
          createdTs: 1422040992,
          modifiedTs: 1422040992,
          createdUserId: '11e95f8ec39de8fbdb0a4f1a',
          modifiedUserId: '11e95f8ec39de8fbdb0a4f1a',
        },
        terminalManufacturer: {
          title: 'My terminal',
          idtype: IdtypeEnum.Mac,
          code: '4',
          createdTs: 1422040992,
          modifiedTs: 1422040992,
          createdUserId: '11e95f8ec39de8fbdb0a4f1a',
          modifiedUserId: '11e95f8ec39de8fbdb0a4f1a',
        },
      },
    };
    expected.data.terminalCvm.contactData = null;
    expected.data.terminalCvm.contactlessData = null;

    expect(response.result).not.toBeNull();
    expectMatchingWithOptions(
      expected,
      response.result,
      { allowExtra: true, isOrdered: false, checkValues: false }
    );
  });
});
